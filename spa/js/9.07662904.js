(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[9],{"75a0":function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{},[s("q-dialog",{model:{value:e.logoutconfirm,callback:function(t){e.logoutconfirm=t},expression:"logoutconfirm"}},[s("q-card",[s("q-card-section",{staticClass:"row items-center"},[s("span",{staticClass:"q-ml-sm"},[e._v("确定登出？")])]),s("q-card-actions",{attrs:{align:"right"}},[s("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"取消",color:"primary"}}),s("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"确认",color:"primary"},on:{click:e.handleLogout}})],1)],1)],1),s("Register",{model:{value:e.showRegisterModal,callback:function(t){e.showRegisterModal=t},expression:"showRegisterModal"}}),s("Login",{model:{value:e.showLoginModal,callback:function(t){e.showLoginModal=t},expression:"showLoginModal"}}),s("div",{staticClass:"text-white bg-deep-orange-12 row justify-center items-center",staticStyle:{height:"200px"}},[e.shareState.is_authed?s("div",{staticClass:"column items-center"},[s("q-avatar",{staticClass:"q-mb-md",attrs:{size:"5rem"},on:{click:function(t){e.logoutconfirm=!0}}},[s("img",{attrs:{src:e.shareState.useravatar,alt:""}})]),s("div",[e._v(e._s(e.shareState.username))])],1):s("div",[s("span",[e._v("点击"),s("a",{attrs:{href:"javascript:void(0)"},on:{click:function(t){e.showLoginModal=!0}}},[e._v("登录")]),e._v("或者"),s("a",{attrs:{href:"javascript:void(0)"},on:{click:function(t){e.showRegisterModal=!0}}},[e._v("注册")])])])]),s("div",[e._v("我的关注")]),s("div",[e._v("我收藏的作品")]),s("div",[e._v("我发布的作品")])],1)},n=[],o=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("q-dialog",{attrs:{value:e.value},on:{input:function(t){return e.$emit("input",t)}}},[s("q-card",{staticClass:"q-pa-md",staticStyle:{width:"400px"}},[s("q-form",{staticClass:"q-gutter-md",on:{submit:e.onSubmit}},[s("q-input",{attrs:{dense:"",filled:"",label:"Please input your username",hint:"username","lazy-rules":"",rules:[function(e){return e&&e.length>0||"Please type something"}]},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}}),s("q-input",{attrs:{dense:"",filled:"",type:"password",label:"Please input your password",hint:"password","lazy-rules":"",rules:[function(e){return e&&e.length>0||"Please type something"}]},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),s("div",[s("q-btn",{attrs:{label:"确定",type:"submit",color:"primary"}}),s("q-btn",{staticClass:"q-ml-sm",attrs:{label:"取消",color:"primary",flat:""},on:{click:e.onCancel}})],1)],1)],1)],1)],1)},r=[],i={props:{value:Boolean},data:function(){return{username:null,password:null,errorMsg:[],successMsg:null,commited:!1}},methods:{onSubmit:function(){var e=this;if(this.errorMsg=[],!this.commited){var t="api/tokens",s={username:this.username,password:this.password};this.commited=!0,this.$axios.post(t,{},{auth:s}).then((function(t){e.$store.dispatch("base/login_action",t.data.token),e.onCancel(),e.$toasted.success("登录成功！")})).catch((function(t){console.log(t),e.$toasted.error("登录失败..."),e.onCancel(!1)}))}},onCancel:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.username=null,this.password=null,this.errorMsg=[],this.successMsg=null,this.commited=!1,e&&this.$emit("input",!1)}}},l=i,u=s("2877"),c=s("eebe"),m=s.n(c),d=s("24e8"),p=s("f09f"),h=s("0378"),f=s("27f9"),g=s("9c40"),v=Object(u["a"])(l,o,r,!1,null,null,null),b=v.exports;m()(v,"components",{QDialog:d["a"],QCard:p["a"],QForm:h["a"],QInput:f["a"],QBtn:g["a"]});var w=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("q-dialog",{attrs:{value:e.value},on:{input:function(t){return e.$emit("input",t)}}},[s("q-card",{staticClass:"q-pa-md",staticStyle:{width:"400px"}},[s("q-form",{staticClass:"q-gutter-md",on:{submit:e.onSubmit}},[s("q-input",{attrs:{dense:"",filled:"",label:"Please input your username",hint:"username","lazy-rules":"",rules:[function(e){return e&&e.length>0||"Please type something"}]},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}}),s("q-input",{attrs:{dense:"",filled:"",type:"password",label:"Please input your password",hint:"password","lazy-rules":"",rules:[function(e){return e&&e.length>0||"Please type something"}]},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),s("q-input",{attrs:{dense:"",filled:"",type:"email",label:"Please input your email","lazy-rules":"",rules:[function(e){return null!==e&&""!==e||"Please type your email"}]},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}}),e._l(e.errorMsg,(function(t,a){return e.errorMsg.length?s("q-banner",{key:a,staticClass:"bg-negative text-white"},[e._v("\r\n        "+e._s(t)+"\r\n      ")]):e._e()})),s("div",[s("q-btn",{attrs:{label:"确定",type:"submit",color:"primary"}}),s("q-btn",{staticClass:"q-ml-sm",attrs:{label:"取消",color:"primary",flat:""},on:{click:e.onCancel}})],1)],2)],1)],1)],1)},y=[],q=(s("6b54"),s("06db"),{props:{value:Boolean},data:function(){return{username:null,password:null,email:null,errorMsg:[],commited:!1}},methods:{onSubmit:function(){var e=this;if(this.errorMsg=[],!this.commited){var t="api/users",s={username:this.username,password:this.password,email:this.email};this.commited=!0,this.$axios.post(t,s).then((function(t){e.$toasted.success("恭喜！注册成功！"),e.onCancel()})).catch((function(t){if(e.commited=!1,t.response&&t.response.data){var s=t.response.data.message;for(var a in s)console.log(a,s[a]),e.errorMsg.push(a.toString()+": "+s[a].toString())}console.log(t.response.data)}))}},onCancel:function(){this.username=null,this.email=null,this.password=null,this.errorMsg=[],this.commited=!1,this.$emit("input",!1)}}}),C=q,_=s("54e1"),M=Object(u["a"])(C,w,y,!1,null,null,null),k=M.exports;m()(M,"components",{QDialog:d["a"],QCard:p["a"],QForm:h["a"],QInput:f["a"],QBanner:_["a"],QBtn:g["a"]});s("28a5"),s("a481");var x={components:{Register:k,Login:b},data:function(){return{shareState:this.$store.state.base,showLoginModal:!1,showRegisterModal:!1,logoutconfirm:!1}},methods:{handleLogout:function(){this.$store.dispatch("base/logout_action"),this.$toasted.info("您已登出...")},test:function(){console.log(this.transform),console.log(this.username,this.$store.state.base.username)}},created:function(){}},Q=x,$=s("a370"),S=s("4b7e"),P=s("cb32"),L=s("7f67"),R=Object(u["a"])(Q,a,n,!1,null,null,null);t["default"]=R.exports;m()(R,"components",{QDialog:d["a"],QCard:p["a"],QCardSection:$["a"],QCardActions:S["a"],QBtn:g["a"],QAvatar:P["a"]}),m()(R,"directives",{ClosePopup:L["a"]})}}]);