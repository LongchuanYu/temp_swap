webpackJsonp([5],{Ob1G:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s("xyJZ"),r=s("olkN"),o={data:function(){return{shareState:r.a.state,followers:""}},components:{pagination:s("dQ4z").a,member:a.a},methods:{onFollowUser:function(t){var e=this,s="/follow/"+t.id;this.$axios.get(s).then(function(t){e.$router.push({path:e.$route.fullPath,query:{timestamp:Number(new Date)}})})},onUnfolloweUser:function(t){var e=this,s="/unfollow/"+t.id;this.$axios.get(s).then(function(t){e.$router.push({path:e.$route.fullPath,query:{timestamp:Number(new Date)}})})},_getUserFollowers:function(t){var e=this,s=1,a=5;void 0!==this.$route.query.page&&(s=this.$route.query.page),void 0!==this.$route.query.per_page&&(a=this.$route.query.per_page);var r="/users/"+t+"/followers/",o={page:s,per_page:a};this.$axios.get(r,{params:o}).then(function(t){console.log("new fans:",t.data),e.followers=t.data}).catch(function(t){console.error(t)})}},created:function(){var t=this.$route.params.id||this.shareState.user_id;this._getUserFollowers(t)},beforeRouteUpdate:function(t,e,s){s();var a=t.params.id||this.shareState.user_id;this._getUserFollowers(a)}},n={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"card border-0 mb-3 mt-3"},[s("div",{staticClass:"card-header d-flex align-items-center justify-content-between bg-light border-0 mb-3"},[s("div",{staticClass:"float-left"},[s("i",{staticClass:"fa fa-commenting-o"}),t._v("\n            All Posts"),s("small",{staticClass:"font-weight-normal"},[t._v("（共"+t._s(t.followers?t.followers._meta.total_items:"")+"个，"+t._s(t.followers?t.followers._meta.total_pages:"")+"页）")])]),t._v(" "),t._m(0)]),t._v(" "),t._l(t.followers.items,function(e,a){return s("member",{key:a,attrs:{member:e},on:{"follow-user":function(s){return t.onFollowUser(e)},"unfollow-user":function(s){return t.onUnfolloweUser(e)}}})}),t._v(" "),t.followers._meta?s("pagination",{attrs:{curPage:t.followers._meta.page,perPage:t.followers._meta.per_page,totalPage:t.followers._meta.total_pages}}):t._e()],2)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"dropdown"},[e("div",{attrs:{id:"dropdownMenuButton","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}},[e("i",{staticClass:"fa fa-bars"})]),this._v(" "),e("div",{staticClass:"dropdown-menu dropdown-menu-right",attrs:{"aria-labelledby":"dropdownMenuButton"}},[e("a",{staticClass:"dropdown-item",attrs:{href:"#"}},[this._v("haha")])])])}]},l=s("VU/8")(o,n,!1,null,null,null);e.default=l.exports},xyJZ:function(t,e,s){"use strict";var a=s("olkN"),r={name:"Member",props:["member"],data:function(){return{shareState:a.a.state}}},o={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"card-body border d-flex justify-content-start mb-2"},[s("router-link",{attrs:{to:{path:"/user/"+t.member.id}}},[s("img",{staticClass:"mr-3",staticStyle:{width:"50px",height:"50px"},attrs:{src:t.member._links.avatar,alt:""}})]),t._v(" "),s("div",{staticClass:"align-self-center",staticStyle:{"font-size":"0.9em"}},[s("div",{staticClass:"d-flex flex-wrap justify-content-start mb-2 align-items-center"},[s("span",{staticClass:"h6 mr-2 mb-0 font-weight-bold"},[t._v(t._s(t.member.username||t.member.name))]),t._v(" "),s("span",{staticClass:"small text-primary"},[t._v("关注 "+t._s(t.member.followeds_count)+"，")]),t._v(" "),s("span",{staticClass:"small text-danger"},[t._v("粉丝 "+t._s(t.member.followers_count))])]),t._v(" "),s("p",{staticClass:"mb-0"},[s("strong",{staticClass:"m-0"},[t._v("关注时间：")]),s("span",[t._v(t._s(t.$moment(t.member.timestamp).format("YYYY/MM/DD HH:mm:ss")))])])]),t._v(" "),t.$route.params.id==t.shareState.user_id?s("div",{staticClass:"align-self-center ml-auto"},[t.member.is_following?s("button",{staticClass:"btn btn-primary",on:{click:function(e){return t.$emit("unfollow-user")}}},[t._v("取消关注")]):t.member.is_following||t.shareState.user_id==t.member.id?t._e():s("button",{staticClass:"btn btn-primary",on:{click:function(e){return t.$emit("follow-user")}}},[t._v("关注")])]):t._e()],1)},staticRenderFns:[]},n=s("VU/8")(r,o,!1,null,null,null);e.a=n.exports}});
//# sourceMappingURL=5.1ba1acf319daf50ce676.js.map