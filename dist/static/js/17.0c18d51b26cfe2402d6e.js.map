{"version":3,"sources":["webpack:///./src/components/Auth/Register.vue?5c54","webpack:///./src/components/Auth/Register.vue","webpack:///src/components/Auth/Register.vue"],"names":["Auth_Register","render","_vm","this","_h","$createElement","_c","_self","staticClass","_v","on","submit","$event","preventDefault","onSubmit","attrs","for","directives","name","rawName","value","registerForm","expression","class","is-invalid","usernameError","type","id","placeholder","domProps","input","target","composing","$set","_s","emailError","aria-describedby","_e","passwordError","staticRenderFns","Component","__webpack_require__","normalizeComponent","data","username","email","password","submitted","errors","methods","e","_this","validEmail","payload","$axios","post","then","response","$router","push","catch","error","field","message","test","__webpack_exports__"],"mappings":"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","file":"static/js/17.0c18d51b26cfe2402d6e.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"container\"},[_c('h1',[_vm._v(\"Register\")]),_vm._v(\" \"),_c('div',{staticClass:\"row\"},[_c('div',{staticClass:\"col-md-4\"},[_c('form',{on:{\"submit\":function($event){$event.preventDefault();return _vm.onSubmit($event)}}},[_c('div',{staticClass:\"form-group\"},[_c('label',{attrs:{\"for\":\"username\"}},[_vm._v(\"Username\")]),_vm._v(\" \"),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.registerForm.username),expression:\"registerForm.username\"}],staticClass:\"form-control\",class:{'is-invalid': _vm.registerForm.usernameError},attrs:{\"type\":\"text\",\"id\":\"username\",\"placeholder\":\"\"},domProps:{\"value\":(_vm.registerForm.username)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.registerForm, \"username\", $event.target.value)}}}),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.registerForm.usernameError),expression:\"registerForm.usernameError\"}],staticClass:\"invalid-feedback\"},[_vm._v(_vm._s(_vm.registerForm.usernameError))])]),_vm._v(\" \"),_c('div',{staticClass:\"form-group\"},[_c('label',{attrs:{\"for\":\"email\"}},[_vm._v(\"Email address\")]),_vm._v(\" \"),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.registerForm.email),expression:\"registerForm.email\"}],staticClass:\"form-control\",class:{'is-invalid': _vm.registerForm.emailError},attrs:{\"type\":\"email\",\"id\":\"email\",\"aria-describedby\":\"emailHelp\",\"placeholder\":\"\"},domProps:{\"value\":(_vm.registerForm.email)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.registerForm, \"email\", $event.target.value)}}}),_vm._v(\" \"),(!_vm.registerForm.emailError)?_c('small',{staticClass:\"form-text text-muted\",attrs:{\"id\":\"emailHelp\"}},[_vm._v(\"We'll never share your email with anyone else.\")]):_vm._e(),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.registerForm.emailError),expression:\"registerForm.emailError\"}],staticClass:\"invalid-feedback\"},[_vm._v(_vm._s(_vm.registerForm.emailError))])]),_vm._v(\" \"),_c('div',{staticClass:\"form-group\"},[_c('label',{attrs:{\"for\":\"password\"}},[_vm._v(\"Password\")]),_vm._v(\" \"),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.registerForm.password),expression:\"registerForm.password\"}],staticClass:\"form-control\",class:{'is-invalid': _vm.registerForm.passwordError},attrs:{\"type\":\"password\",\"id\":\"password\",\"placeholder\":\"\"},domProps:{\"value\":(_vm.registerForm.password)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.registerForm, \"password\", $event.target.value)}}}),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.registerForm.passwordError),expression:\"registerForm.passwordError\"}],staticClass:\"invalid-feedback\"},[_vm._v(_vm._s(_vm.registerForm.passwordError))])]),_vm._v(\" \"),_c('button',{staticClass:\"btn btn-primary\",attrs:{\"type\":\"submit\"}},[_vm._v(\"Register\")])])])])])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-1afb69a8\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/Auth/Register.vue\n// module id = null\n// module chunks = ","var normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./Register.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./Register.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-1afb69a8\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./Register.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/Auth/Register.vue\n// module id = null\n// module chunks = ","<template>\r\n  <div class=\"container\">\r\n    <h1>Register</h1>\r\n    <div class=\"row\">\r\n      <div class=\"col-md-4\">\r\n        <!-- 事件修饰符，提交事件不再重载页面，方法onSubmit定义在在methods中 -->\r\n        <form @submit.prevent=\"onSubmit\">\r\n          <div class=\"form-group\">\r\n            <label for=\"username\">Username</label>\r\n            <!-- 这里v-mode实现表单的双向数据绑定 -->\r\n            <input type=\"text\" v-model=\"registerForm.username\" class=\"form-control\" v-bind:class=\"{'is-invalid': registerForm.usernameError}\" id=\"username\" placeholder=\"\">\r\n            <div v-show=\"registerForm.usernameError\" class=\"invalid-feedback\">{{ registerForm.usernameError }}</div>\r\n          </div>\r\n          <div class=\"form-group\">\r\n            <label for=\"email\">Email address</label>\r\n            <input type=\"email\" v-model=\"registerForm.email\" class=\"form-control\" v-bind:class=\"{'is-invalid': registerForm.emailError}\" id=\"email\" aria-describedby=\"emailHelp\" placeholder=\"\">\r\n            <small v-if=\"!registerForm.emailError\" id=\"emailHelp\" class=\"form-text text-muted\">We'll never share your email with anyone else.</small>\r\n            <div v-show=\"registerForm.emailError\" class=\"invalid-feedback\">{{ registerForm.emailError }}</div>\r\n          </div>\r\n          <div class=\"form-group\">\r\n            <label for=\"password\">Password</label>\r\n            <input type=\"password\" v-model=\"registerForm.password\" class=\"form-control\" v-bind:class=\"{'is-invalid': registerForm.passwordError}\" id=\"password\" placeholder=\"\">\r\n            <div v-show=\"registerForm.passwordError\" class=\"invalid-feedback\">{{ registerForm.passwordError }}</div>\r\n          </div>\r\n          <button type=\"submit\" class=\"btn btn-primary\">Register</button>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from 'axios'\r\nexport default {\r\n  name:'Register',\r\n  data(){\r\n    return {\r\n      registerForm: {\r\n        username: '',\r\n        email: '',\r\n        password: '',\r\n        submitted: false,  // 是否点击了 submit 按钮\r\n        errors: 0,  // 表单是否在前端验证通过，0 表示没有错误，验证通过\r\n        usernameError: null,\r\n        emailError: null,\r\n        passwordError: null\r\n      }\r\n    }\r\n  },\r\n  methods:{\r\n    onSubmit(e){// 表单验证\r\n      //（？）这里为什么要定义一个submitted呢\r\n      this.registerForm.submitted = true; \r\n     if (!this.registerForm.username) {\r\n        this.registerForm.errors++\r\n        this.registerForm.usernameError = 'Username required.'\r\n      } else {\r\n        this.registerForm.usernameError = null\r\n      }\r\n\r\n      if (!this.registerForm.email) {\r\n        this.registerForm.errors++\r\n        this.registerForm.emailError = 'Email required.'\r\n      } else if (!this.validEmail(this.registerForm.email)) {\r\n        this.registerForm.errors++\r\n        this.registerForm.emailError = 'Valid email required.'\r\n      } else {\r\n        this.registerForm.emailError = null\r\n      }\r\n\r\n      if (!this.registerForm.password) {\r\n        this.registerForm.errors++\r\n        this.registerForm.passwordError = 'Password required.'\r\n      } else {\r\n        this.registerForm.passwordError = null\r\n      }\r\n\r\n      if (this.registerForm.errors > 0) {\r\n        // 表单验证没通过时，不继续往下执行，即不会通过 axios 调用后端API\r\n        return false\r\n      }\r\n      const path = '/users'\r\n      const payload = {\r\n        username: this.registerForm.username,\r\n        email: this.registerForm.email,\r\n        password: this.registerForm.password\r\n      }\r\n      this.$axios.post(path, payload)\r\n        .then((response) => {\r\n          // handle success\r\n          this.$router.push('/login')\r\n        })\r\n        .catch((error) => {\r\n          // handle error\r\n          //还需要考虑服务器关闭的情况\r\n          for (var field in error.response.data.message) {\r\n            if (field == 'username') {\r\n              this.registerForm.usernameError = error.response.data.message.username\r\n            } else if (field == 'email') {\r\n              this.registerForm.emailError = error.response.data.message.email\r\n            } else if (field == 'password') {\r\n              this.registerForm.passwordError = error.response.data.message.password\r\n            }\r\n          }\r\n        })\r\n    },\r\n    validEmail: function (email) {\r\n      var re = /^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\r\n      return re.test(email);\r\n    }\r\n  }\r\n}\r\n</script>\n\n\n// WEBPACK FOOTER //\n// src/components/Auth/Register.vue"],"sourceRoot":""}