{"version":3,"sources":["webpack:///src/components/Profile/User.vue","webpack:///./src/components/Profile/User.vue?8d9e","webpack:///./src/components/Profile/User.vue"],"names":["User","data","sharestate","store","state","user","id","email","username","name","location","about_me","member_since","last_seen","followeds_count","followers_count","posts_count","followed_posts_count","_links","self","avatar","computed","isUserOverView","indexOf","this","$route","methods","onFollowUser","_this","path","$axios","get","then","res","console","log","getUser","catch","e","error","onUnfollowUser","_this2","userid","_this3","created","params","user_id","$router","replace","beforeRouteUpdate","to","from","next","Profile_User","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","src","alt","_v","type","_e","is_following","on","click","$event","class","active-class","href","_s","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/10.336a35286ec1af7d006e.js","sourcesContent":["<template>\r\n  <section>\r\n    <div class=\"container\">\r\n      <div class=\"border p-3\">\r\n        <div class=\"row\">\r\n          <!-- 头像+edit按钮 -->\r\n          <div class=\"col-sm-3\">\r\n            <div class=\"avatar pb-3\">\r\n              <img :src=\"user._links.avatar\" alt class=\"rounded img-fluid w-100\" />\r\n            </div>\r\n\r\n            <router-link\r\n              :to=\"{name:'SettingProfile'}\"\r\n              v-if=\"sharestate.user_id == $route.params.id\"\r\n            >\r\n              <button type=\"button\" class=\"btn btn-outline-primary w-100 mb-2\">Settings</button>\r\n            </router-link>\r\n            <button\r\n              type=\"button\"\r\n              class=\"btn btn-outline-danger w-100 mb-5\"\r\n              v-if=\"sharestate.user_id == $route.params.id\"\r\n            >Delete Account</button>\r\n            <button\r\n              type=\"button\"\r\n              class=\"btn btn-outline-primary w-100 mb-5\"\r\n              v-if=\"sharestate.user_id != $route.params.id && user.is_following\"\r\n              @click=\"onUnfollowUser($route.params.id)\"\r\n            >取消关注</button>\r\n            <button\r\n              type=\"button\"\r\n              class=\"btn btn-outline-primary w-100 mb-5\"\r\n              v-else-if=\"sharestate.user_id != $route.params.id && !user.is_following\"\r\n              @click=\"onFollowUser($route.params.id)\"\r\n            >关注</button>\r\n\r\n            <!-- <router-link :to=\"{name:'EditProfile',params:{id:sharestate.user_id}}\" v-if=\"sharestate.user_id == $route.params.id\">\r\n                        <button type=\"button\" class=\"btn btn-outline-primary w-100 mb-5\">Edit profile</button>\r\n                    </router-link>\r\n            <button v-else type=\"button\" class=\"btn btn-outline-secondary w-100 mb-5 disabled custom-btn\">Edit profile</button>-->\r\n          </div>\r\n\r\n          <!-- 个人资料 -->\r\n          <div class=\"col-sm-9\">\r\n            <ul class=\"nav nav-tabs\">\r\n              <li class=\"nav-item\">\r\n                <!-- \r\n                                （？）v-bind:active-class怎么理解？\r\n                                答：这里的tab切换需要在class上添加“active”标签，这里使用vue-router的active-class设置链接激活时使用的 CSS 类名，详见文档\r\n                                否则单纯的tab切换，a标签不会变色，导致切换效果不好。也无法动态响应url的变化，当url变化时tab不会跟着切换。。。\r\n                -->\r\n                <router-link\r\n                  :to=\"{name:'UserOverview'}\"\r\n                  v-bind:active-class=\"'active'\"\r\n                  class=\"nav-link\"\r\n                  href=\"#\"\r\n                  v-bind:class=\"isUserOverView\"\r\n                >个人资料</router-link>\r\n              </li>\r\n              <li class=\"nav-item\">\r\n                <router-link\r\n                  :to=\"{name:'UserFollowers'}\"\r\n                  v-bind:active-class=\"'active'\"\r\n                  class=\"nav-link\"\r\n                  href=\"#\"\r\n                >\r\n                  粉丝\r\n                  <span class=\"badge badge-pill badge-danger ml-1\">{{user.followers_count}}</span>\r\n                </router-link>\r\n              </li>\r\n              <li class=\"nav-item\">\r\n                <router-link\r\n                  :to=\"{name:'UserFollowing'}\"\r\n                  v-bind:active-class=\"'active'\"\r\n                  class=\"nav-link\"\r\n                  href=\"#\"\r\n                >\r\n                  关注\r\n                  <span class=\"badge badge-pill badge-danger ml-1\">{{user.followeds_count}}</span>\r\n                </router-link>\r\n              </li>\r\n\r\n              <li class=\"nav-item\">\r\n                <router-link\r\n                  :to=\"{name:'Posts'}\"\r\n                  class=\"nav-link\"\r\n                  href=\"#\"\r\n                  v-bind:active-class=\"'active'\"\r\n                >\r\n                  我的文章\r\n                  <span class=\"badge badge-pill badge-danger ml-1\">{{user.posts_count}}</span>\r\n                </router-link>\r\n              </li>\r\n              <li class=\"nav-item\">\r\n                <a class=\"nav-link\" href=\"#\" v-bind:active-class=\"'active'\">\r\n                  关注文章\r\n                  <span class=\"badge badge-pill badge-danger ml-1\">{{user.followed_posts_count}}</span>\r\n                </a>\r\n              </li>\r\n            </ul>\r\n            <router-view></router-view>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </section>\r\n</template>\r\n\r\n<script>\r\nimport store from \"../../store.js\";\r\nexport default {\r\n  data() {\r\n    return {\r\n      sharestate: store.state,\r\n      user: {\r\n        id: \"\",\r\n        email: \"\",\r\n        username: \"\",\r\n        name: \"\",\r\n        location: \"\",\r\n        about_me: \"\",\r\n        member_since: \"\",\r\n        last_seen: \"\",\r\n        followeds_count: 0,\r\n        followers_count: 0,\r\n        posts_count: 0,\r\n        followed_posts_count: 0,\r\n        _links: {\r\n          self: \"\",\r\n          avatar: \"\"\r\n        }\r\n      }\r\n    };\r\n  },\r\n  computed: {\r\n    isUserOverView: function() {\r\n      const tabs = [\r\n        \"UserFollowers\",\r\n        \"UserFollowing\",\r\n        \"UserPostsList\",\r\n        \"UserFollowedsPostsList\"\r\n      ];\r\n      if (tabs.indexOf(this.$route.name) == -1) {\r\n        return \"active\";\r\n      } else {\r\n        return \"\";\r\n      }\r\n    }\r\n  },\r\n  methods: {\r\n    onFollowUser(id) {\r\n      const path = `/follow/${id}`;\r\n      this.$axios\r\n        .get(path)\r\n        .then(res => {\r\n          console.log(\"关注ok\");\r\n          this.getUser(id);\r\n        })\r\n        .catch(e => {\r\n          console.error(e);\r\n        });\r\n    },\r\n    onUnfollowUser(id) {\r\n      const path = `/unfollow/${id}`;\r\n      this.$axios\r\n        .get(path)\r\n        .then(res => {\r\n          console.log(\"取消ok\");\r\n          this.getUser(id);\r\n        })\r\n        .catch(e => {\r\n          console.error(e);\r\n        });\r\n    },\r\n    getUser(userid) {\r\n      //（？）如何实现范围外的userid引发404错误，然后返回原路由？\r\n      //  在全局axios中实现，拦截了response。对于404，route.back()\r\n      //（？）为何在Profile页面登录后没有route.back()?而是进入/user/0的路由？\r\n      //  1.未登录状态下Profile的路由是/user/0，在这个时候登录自然是进入/user/0的路由了。\r\n      //  2.store.js中：退出的时候会有一个清理动作，把userid设置为0\r\n      //  ....因此在未登录状态下点击Profile按钮就是/user/0\r\n      //  ....修复方法在当前组件的created函数里面，通过跳转到正确路由来解决\r\n\r\n      this.$axios\r\n        .get(`/users/${userid}`)\r\n        .then(res => {\r\n          console.log(res);\r\n          this.user = res.data;\r\n        })\r\n        .catch(e => {\r\n          console.log(e);\r\n        });\r\n    }\r\n  },\r\n  created: function() {\r\n    //（？）这里怎么获取userid呢？\r\n    //  1.用this.sharestate.user_id ,但这样无法动态响应路由变化。。\r\n    //  2.通过this.$route.params.id来访问路由传参\r\n    let userid = this.$route.params.id;\r\n    if (userid == \"0\") {\r\n      userid = this.sharestate.user_id;\r\n      this.$router.replace(`/user/${userid}`);\r\n    }\r\n    this.getUser(userid);\r\n  },\r\n  beforeRouteUpdate(to, from, next) {\r\n    next();\r\n    this.getUser(to.params.id);\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n/*\r\n    重写了按钮的disabled状态\r\n */\r\n.custom-btn {\r\n  cursor: not-allowed;\r\n}\r\n.custom-btn:focus {\r\n  -webkit-box-shadow: 0 0 0 0;\r\n  box-shadow: 0 0 0 0;\r\n}\r\n</style>\n\n\n// WEBPACK FOOTER //\n// src/components/Profile/User.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('section',[_c('div',{staticClass:\"container\"},[_c('div',{staticClass:\"border p-3\"},[_c('div',{staticClass:\"row\"},[_c('div',{staticClass:\"col-sm-3\"},[_c('div',{staticClass:\"avatar pb-3\"},[_c('img',{staticClass:\"rounded img-fluid w-100\",attrs:{\"src\":_vm.user._links.avatar,\"alt\":\"\"}})]),_vm._v(\" \"),(_vm.sharestate.user_id == _vm.$route.params.id)?_c('router-link',{attrs:{\"to\":{name:'SettingProfile'}}},[_c('button',{staticClass:\"btn btn-outline-primary w-100 mb-2\",attrs:{\"type\":\"button\"}},[_vm._v(\"Settings\")])]):_vm._e(),_vm._v(\" \"),(_vm.sharestate.user_id == _vm.$route.params.id)?_c('button',{staticClass:\"btn btn-outline-danger w-100 mb-5\",attrs:{\"type\":\"button\"}},[_vm._v(\"Delete Account\")]):_vm._e(),_vm._v(\" \"),(_vm.sharestate.user_id != _vm.$route.params.id && _vm.user.is_following)?_c('button',{staticClass:\"btn btn-outline-primary w-100 mb-5\",attrs:{\"type\":\"button\"},on:{\"click\":function($event){return _vm.onUnfollowUser(_vm.$route.params.id)}}},[_vm._v(\"取消关注\")]):(_vm.sharestate.user_id != _vm.$route.params.id && !_vm.user.is_following)?_c('button',{staticClass:\"btn btn-outline-primary w-100 mb-5\",attrs:{\"type\":\"button\"},on:{\"click\":function($event){return _vm.onFollowUser(_vm.$route.params.id)}}},[_vm._v(\"关注\")]):_vm._e()],1),_vm._v(\" \"),_c('div',{staticClass:\"col-sm-9\"},[_c('ul',{staticClass:\"nav nav-tabs\"},[_c('li',{staticClass:\"nav-item\"},[_c('router-link',{staticClass:\"nav-link\",class:_vm.isUserOverView,attrs:{\"to\":{name:'UserOverview'},\"active-class\":'active',\"href\":\"#\"}},[_vm._v(\"个人资料\")])],1),_vm._v(\" \"),_c('li',{staticClass:\"nav-item\"},[_c('router-link',{staticClass:\"nav-link\",attrs:{\"to\":{name:'UserFollowers'},\"active-class\":'active',\"href\":\"#\"}},[_vm._v(\"\\n                粉丝\\n                \"),_c('span',{staticClass:\"badge badge-pill badge-danger ml-1\"},[_vm._v(_vm._s(_vm.user.followers_count))])])],1),_vm._v(\" \"),_c('li',{staticClass:\"nav-item\"},[_c('router-link',{staticClass:\"nav-link\",attrs:{\"to\":{name:'UserFollowing'},\"active-class\":'active',\"href\":\"#\"}},[_vm._v(\"\\n                关注\\n                \"),_c('span',{staticClass:\"badge badge-pill badge-danger ml-1\"},[_vm._v(_vm._s(_vm.user.followeds_count))])])],1),_vm._v(\" \"),_c('li',{staticClass:\"nav-item\"},[_c('router-link',{staticClass:\"nav-link\",attrs:{\"to\":{name:'Posts'},\"href\":\"#\",\"active-class\":'active'}},[_vm._v(\"\\n                我的文章\\n                \"),_c('span',{staticClass:\"badge badge-pill badge-danger ml-1\"},[_vm._v(_vm._s(_vm.user.posts_count))])])],1),_vm._v(\" \"),_c('li',{staticClass:\"nav-item\"},[_c('a',{staticClass:\"nav-link\",attrs:{\"href\":\"#\",\"active-class\":'active'}},[_vm._v(\"\\n                关注文章\\n                \"),_c('span',{staticClass:\"badge badge-pill badge-danger ml-1\"},[_vm._v(_vm._s(_vm.user.followed_posts_count))])])])]),_vm._v(\" \"),_c('router-view')],1)])])])])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-83ffcbdc\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/Profile/User.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-83ffcbdc\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./User.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./User.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./User.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-83ffcbdc\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./User.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-83ffcbdc\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/Profile/User.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}