{"version":3,"sources":["webpack:///./src/components/Base/Alert.vue?e14f","webpack:///./src/components/Base/Alert.vue","webpack:///src/components/Base/Alert.vue","webpack:///src/components/Auth/Login.vue","webpack:///./src/components/Auth/Login.vue?14e5","webpack:///./src/components/Auth/Login.vue"],"names":["Base_Alert","render","_h","this","$createElement","_self","_c","staticClass","class","variant","attrs","role","_v","_s","message","staticRenderFns","components_Base_Alert","__webpack_require__","normalizeComponent","props","Login","name","components","alert","data","sharedState","store","state","alertVariant","alertMessage","loginForm","username","password","submitted","errors","usernameError","passwordError","methods","onSubmit","e","_this","$axios","post","auth","then","response","window","localStorage","setItem","token","loginAction","$route","query","redirect","$router","push","catch","error","status","console","log","Auth_Login","_vm","_e","on","submit","$event","preventDefault","for","directives","rawName","value","expression","is-invalid","type","id","placeholder","domProps","input","target","composing","$set","to","_m","href","Login_Component","Login_normalizeComponent","__webpack_exports__"],"mappings":"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","file":"static/js/18.73fc17e2d4631d1d13b2.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"alert\",class:'alert-'+_vm.variant,attrs:{\"role\":\"alert\"}},[_vm._v(\"\\n    \"+_vm._s(_vm.message)+\"\\n\")])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-269db936\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/Base/Alert.vue\n// module id = null\n// module chunks = ","var normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./Alert.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./Alert.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-269db936\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./Alert.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/Base/Alert.vue\n// module id = null\n// module chunks = ","<template>\r\n    <!--\r\n        v-bind用于动态绑定属性\r\n        这里可以动态的改变class属性\r\n      -->\r\n    <div class=\"alert\" role=\"alert\" v-bind:class=\"'alert-'+variant\">\r\n        {{message}}\r\n    </div>\r\n</template>\r\n<script>\r\nexport default {\r\n    props:['variant','message']\r\n}\r\n</script>\n\n\n// WEBPACK FOOTER //\n// src/components/Base/Alert.vue","<template>\r\n  <div class=\"container\">\r\n    <alert \r\n      v-if=\"sharedState.is_new\"\r\n      v-bind:variant=\"alertVariant\"\r\n      v-bind:message=\"alertMessage\">\r\n    </alert>\r\n    <h1>Sign In</h1>\r\n    <div class=\"row\">\r\n      <div class=\"col-md-4\">\r\n        <form @submit.prevent=\"onSubmit\">\r\n          <div class=\"form-group\">\r\n            <label for=\"username\">Username</label>\r\n            <input type=\"text\" v-model=\"loginForm.username\" class=\"form-control\" v-bind:class=\"{'is-invalid': loginForm.usernameError}\" id=\"username\" placeholder=\"\">\r\n            <div v-show=\"loginForm.usernameError\" class=\"invalid-feedback\">{{ loginForm.usernameError }}</div>\r\n          </div>\r\n          <div class=\"form-group\">\r\n            <label for=\"password\">Password</label>\r\n            <input type=\"password\" v-model=\"loginForm.password\" class=\"form-control\" v-bind:class=\"{'is-invalid': loginForm.passwordError}\" id=\"password\" placeholder=\"\">\r\n            <div v-show=\"loginForm.passwordError\" class=\"invalid-feedback\">{{ loginForm.passwordError }}</div>\r\n          </div>\r\n          <button type=\"submit\" class=\"btn btn-primary\">Sign In</button>\r\n        </form>\r\n      </div>\r\n    </div>\r\n    <br>\r\n    <p>New User? <router-link to=\"/register\">Click to Register!</router-link></p>\r\n    <p>\r\n        Forgot Your Password?\r\n        <a href=\"#\">Click to Reset It</a>\r\n    </p>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from 'axios'\r\nimport Alert from '../Base/Alert'\r\nimport store from '../../store.js'\r\n\r\nexport default {\r\n  name: 'Login',  //this is the name of the component\r\n  components: {\r\n    alert: Alert\r\n  },\r\n  data () {\r\n    return {\r\n      sharedState: store.state,\r\n      alertVariant: 'info',\r\n      alertMessage: 'Congratulations, you are now a registered user !',\r\n      loginForm: {\r\n        username: '',\r\n        password: '',\r\n        submitted: false,  // 是否点击了 submit 按钮\r\n        errors: 0,  // 表单是否在前端验证通过，0 表示没有错误，验证通过\r\n        usernameError: null,\r\n        passwordError: null\r\n      }\r\n    }\r\n  },\r\n  methods: {\r\n    onSubmit (e) {\r\n      this.loginForm.submitted = true  // 先更新状态\r\n      this.loginForm.errors = 0\r\n\r\n      if (!this.loginForm.username) {\r\n        this.loginForm.errors++\r\n        this.loginForm.usernameError = 'Username required.'\r\n      } else {\r\n        this.loginForm.usernameError = null\r\n      }\r\n\r\n      if (!this.loginForm.password) {\r\n        this.loginForm.errors++\r\n        this.loginForm.passwordError = 'Password required.'\r\n      } else {\r\n        this.loginForm.passwordError = null\r\n      }\r\n\r\n      if (this.loginForm.errors > 0) {\r\n        // 表单验证没通过时，不继续往下执行，即不会通过 axios 调用后端API\r\n        return false\r\n      }\r\n\r\n      const path = '/tokens'\r\n      // axios 实现Basic Auth需要在config中设置 auth 这个属性即可\r\n      this.$axios.post(path, {}, {\r\n        auth: {\r\n          'username': this.loginForm.username,\r\n          'password': this.loginForm.password\r\n        }\r\n      }).then((response) => {          \r\n          // handle success\r\n          window.localStorage.setItem('madblog-token', response.data.token)\r\n          store.loginAction()\r\n          if (typeof this.$route.query.redirect == 'undefined') {\r\n            this.$router.push('/')\r\n          } else {\r\n            // （？）这什么意思？\r\n            //  1、redirect信息：/login?redirect=%2F\r\n            //  2、this.$route.query.redirect,得到url中的查询信息redirect\r\n            //  3、redirect查询信息在路由守卫中定义的。\r\n            //  4.初步理解是记录登录前的url，登陆之后根据这个url跳转到登录前的界面。对，就是的\r\n            this.$router.push(this.$route.query.redirect)  \r\n          }\r\n        })\r\n        .catch((error) => {\r\n          // handle error\r\n          if (error.response.status == 401) {\r\n            this.loginForm.usernameError = 'Invalid username or password.'\r\n            this.loginForm.passwordError = 'Invalid username or password.'\r\n          } else {\r\n            console.log(error.response)\r\n          }\r\n        })\r\n    }\r\n  }\r\n}\r\n</script>\n\n\n// WEBPACK FOOTER //\n// src/components/Auth/Login.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"container\"},[(_vm.sharedState.is_new)?_c('alert',{attrs:{\"variant\":_vm.alertVariant,\"message\":_vm.alertMessage}}):_vm._e(),_vm._v(\" \"),_c('h1',[_vm._v(\"Sign In\")]),_vm._v(\" \"),_c('div',{staticClass:\"row\"},[_c('div',{staticClass:\"col-md-4\"},[_c('form',{on:{\"submit\":function($event){$event.preventDefault();return _vm.onSubmit($event)}}},[_c('div',{staticClass:\"form-group\"},[_c('label',{attrs:{\"for\":\"username\"}},[_vm._v(\"Username\")]),_vm._v(\" \"),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.loginForm.username),expression:\"loginForm.username\"}],staticClass:\"form-control\",class:{'is-invalid': _vm.loginForm.usernameError},attrs:{\"type\":\"text\",\"id\":\"username\",\"placeholder\":\"\"},domProps:{\"value\":(_vm.loginForm.username)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.loginForm, \"username\", $event.target.value)}}}),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.loginForm.usernameError),expression:\"loginForm.usernameError\"}],staticClass:\"invalid-feedback\"},[_vm._v(_vm._s(_vm.loginForm.usernameError))])]),_vm._v(\" \"),_c('div',{staticClass:\"form-group\"},[_c('label',{attrs:{\"for\":\"password\"}},[_vm._v(\"Password\")]),_vm._v(\" \"),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.loginForm.password),expression:\"loginForm.password\"}],staticClass:\"form-control\",class:{'is-invalid': _vm.loginForm.passwordError},attrs:{\"type\":\"password\",\"id\":\"password\",\"placeholder\":\"\"},domProps:{\"value\":(_vm.loginForm.password)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.loginForm, \"password\", $event.target.value)}}}),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.loginForm.passwordError),expression:\"loginForm.passwordError\"}],staticClass:\"invalid-feedback\"},[_vm._v(_vm._s(_vm.loginForm.passwordError))])]),_vm._v(\" \"),_c('button',{staticClass:\"btn btn-primary\",attrs:{\"type\":\"submit\"}},[_vm._v(\"Sign In\")])])])]),_vm._v(\" \"),_c('br'),_vm._v(\" \"),_c('p',[_vm._v(\"New User? \"),_c('router-link',{attrs:{\"to\":\"/register\"}},[_vm._v(\"Click to Register!\")])],1),_vm._v(\" \"),_vm._m(0)],1)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('p',[_vm._v(\"\\n      Forgot Your Password?\\n      \"),_c('a',{attrs:{\"href\":\"#\"}},[_vm._v(\"Click to Reset It\")])])}]\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-ca7956ee\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/Auth/Login.vue\n// module id = null\n// module chunks = ","var normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./Login.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./Login.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-ca7956ee\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./Login.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/Auth/Login.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}