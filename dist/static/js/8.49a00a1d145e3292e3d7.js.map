{"version":3,"sources":["webpack:///src/components/Settings/Profile.vue","webpack:///./src/components/Settings/Profile.vue?b994","webpack:///./src/components/Settings/Profile.vue"],"names":["Profile","data","shareState","store","state","profileForm","name","location","about_me","submitted","methods","onSubmit","_profileForm","this","payload","username","_putUser","user_id","userid","_this","$axios","put","then","res","$toasted","success","$router","push","path","catch","e","console","log","response","message","error","_getUser","_this2","get","created","beforeRouteUpdate","to","from","next","Settings_Profile","render","_vm","_h","$createElement","_c","_self","on","submit","$event","preventDefault","staticClass","attrs","for","_v","directives","rawName","value","expression","type","id","domProps","input","target","composing","$set","rows","staticRenderFns","Component","__webpack_require__","normalizeComponent","__webpack_exports__"],"mappings":"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","file":"static/js/8.49a00a1d145e3292e3d7.js","sourcesContent":["<template>\r\n    <div class=\"\">\r\n\t\t\t<form @submit.prevent=\"onSubmit\">\r\n\t\t\t\t<div class=\"form-group\">\r\n\t\t\t\t\t<label for=\"nickname\">Name</label>\r\n\t\t\t\t\t<input type=\"text\" class=\"form-control\" id=\"nickname\" v-model=\"profileForm.name\">\r\n\t\t\t\t\t\t\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class=\"form-group\">\r\n\t\t\t\t\t<label for=\"location\">Location</label>\r\n\t\t\t\t\t<input type=\"text\" class=\"form-control\" id=\"location\" v-model=\"profileForm.location\">\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class=\"form-group\">\r\n\t\t\t\t\t<label for=\"aboutme\">About me</label>\r\n\t\t\t\t\t<textarea class=\"form-control\" id=\"aboutme\" rows=\"5\" v-model=\"profileForm.about_me\"></textarea>\r\n\t\t\t\t</div>\r\n\t\t\t\t<button type=\"submit\" class=\"btn btn-primary\">Submit</button>\r\n\t\t\t</form>\r\n    </div>\r\n</template>\r\n\r\n\r\n<script>\r\nimport store from '../../store.js'\r\nexport default {\r\n    data(){\r\n        return {\r\n            shareState:store.state,\r\n            profileForm:{\r\n                name:'',\r\n                location:'',\r\n                about_me:'',\r\n                submitted:false\r\n            }\r\n        }\r\n    },\r\n    methods:{\r\n        onSubmit:function(){\r\n            const {name,location,about_me} = this.profileForm\r\n            let payload = {\r\n                username:name,\r\n                location:location,\r\n                about_me:about_me\r\n            }\r\n            this._putUser(this.shareState.user_id,payload)\r\n            \r\n        },\r\n        _putUser(userid,payload){\r\n            this.$axios.put(`/users/${userid}`,payload)\r\n            .then(res=>{\r\n                this.$toasted.success(\"修改成功！\")\r\n                this.$router.push({\r\n                    path:`/User/${userid}`\r\n                })\r\n            })\r\n            .catch(e=>{\r\n                console.log(e.response.data.message)\r\n                this.$toasted.error(\"重名了啊？\")\r\n            })\r\n        },\r\n        _getUser(userid){\r\n            this.$axios.get(`/users/${userid}`)\r\n            .then((res)=>{\r\n                res = res.data\r\n                this.profileForm.name = res.name || res.username\r\n                this.profileForm.location = res.location   \r\n                this.profileForm.about_me = res.about_me\r\n\r\n            })\r\n            .catch((e)=>{\r\n                console.log(e)\r\n            })\r\n        }\r\n    },\r\n    created:function(){\r\n        this._getUser(this.shareState.user_id)\r\n        \r\n    },\r\n    beforeRouteUpdate(to,from,next){\r\n        this.$toasted.error(\"Oh No!\")\r\n        next(false)\r\n    }\r\n}\r\n</script>\n\n\n// WEBPACK FOOTER //\n// src/components/Settings/Profile.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{},[_c('form',{on:{\"submit\":function($event){$event.preventDefault();return _vm.onSubmit($event)}}},[_c('div',{staticClass:\"form-group\"},[_c('label',{attrs:{\"for\":\"nickname\"}},[_vm._v(\"Name\")]),_vm._v(\" \"),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.profileForm.name),expression:\"profileForm.name\"}],staticClass:\"form-control\",attrs:{\"type\":\"text\",\"id\":\"nickname\"},domProps:{\"value\":(_vm.profileForm.name)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.profileForm, \"name\", $event.target.value)}}})]),_vm._v(\" \"),_c('div',{staticClass:\"form-group\"},[_c('label',{attrs:{\"for\":\"location\"}},[_vm._v(\"Location\")]),_vm._v(\" \"),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.profileForm.location),expression:\"profileForm.location\"}],staticClass:\"form-control\",attrs:{\"type\":\"text\",\"id\":\"location\"},domProps:{\"value\":(_vm.profileForm.location)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.profileForm, \"location\", $event.target.value)}}})]),_vm._v(\" \"),_c('div',{staticClass:\"form-group\"},[_c('label',{attrs:{\"for\":\"aboutme\"}},[_vm._v(\"About me\")]),_vm._v(\" \"),_c('textarea',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.profileForm.about_me),expression:\"profileForm.about_me\"}],staticClass:\"form-control\",attrs:{\"id\":\"aboutme\",\"rows\":\"5\"},domProps:{\"value\":(_vm.profileForm.about_me)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.profileForm, \"about_me\", $event.target.value)}}})]),_vm._v(\" \"),_c('button',{staticClass:\"btn btn-primary\",attrs:{\"type\":\"submit\"}},[_vm._v(\"Submit\")])])])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-15f3bda0\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/Settings/Profile.vue\n// module id = null\n// module chunks = ","var normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./Profile.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./Profile.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-15f3bda0\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./Profile.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/Settings/Profile.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}