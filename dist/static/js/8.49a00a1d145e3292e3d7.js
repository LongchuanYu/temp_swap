webpackJsonp([8],{k4ui:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=o("olkN"),a={data:function(){return{shareState:r.a.state,profileForm:{name:"",location:"",about_me:"",submitted:!1}}},methods:{onSubmit:function(){var t=this.profileForm,e={username:t.name,location:t.location,about_me:t.about_me};this._putUser(this.shareState.user_id,e)},_putUser:function(t,e){var o=this;this.$axios.put("/users/"+t,e).then(function(e){o.$toasted.success("修改成功！"),o.$router.push({path:"/User/"+t})}).catch(function(t){console.log(t.response.data.message),o.$toasted.error("重名了啊？")})},_getUser:function(t){var e=this;this.$axios.get("/users/"+t).then(function(t){t=t.data,e.profileForm.name=t.name||t.username,e.profileForm.location=t.location,e.profileForm.about_me=t.about_me}).catch(function(t){console.log(t)})}},created:function(){this._getUser(this.shareState.user_id)},beforeRouteUpdate:function(t,e,o){this.$toasted.error("Oh No!"),o(!1)}},i={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{},[o("form",{on:{submit:function(e){return e.preventDefault(),t.onSubmit(e)}}},[o("div",{staticClass:"form-group"},[o("label",{attrs:{for:"nickname"}},[t._v("Name")]),t._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:t.profileForm.name,expression:"profileForm.name"}],staticClass:"form-control",attrs:{type:"text",id:"nickname"},domProps:{value:t.profileForm.name},on:{input:function(e){e.target.composing||t.$set(t.profileForm,"name",e.target.value)}}})]),t._v(" "),o("div",{staticClass:"form-group"},[o("label",{attrs:{for:"location"}},[t._v("Location")]),t._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:t.profileForm.location,expression:"profileForm.location"}],staticClass:"form-control",attrs:{type:"text",id:"location"},domProps:{value:t.profileForm.location},on:{input:function(e){e.target.composing||t.$set(t.profileForm,"location",e.target.value)}}})]),t._v(" "),o("div",{staticClass:"form-group"},[o("label",{attrs:{for:"aboutme"}},[t._v("About me")]),t._v(" "),o("textarea",{directives:[{name:"model",rawName:"v-model",value:t.profileForm.about_me,expression:"profileForm.about_me"}],staticClass:"form-control",attrs:{id:"aboutme",rows:"5"},domProps:{value:t.profileForm.about_me},on:{input:function(e){e.target.composing||t.$set(t.profileForm,"about_me",e.target.value)}}})]),t._v(" "),o("button",{staticClass:"btn btn-primary",attrs:{type:"submit"}},[t._v("Submit")])])])},staticRenderFns:[]},n=o("VU/8")(a,i,!1,null,null,null);e.default=n.exports}});
//# sourceMappingURL=8.49a00a1d145e3292e3d7.js.map